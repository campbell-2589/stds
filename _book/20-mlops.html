<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Chapter 20 MLOps | Selected Topics In Data Science" />
<meta property="og:type" content="book" />


<meta property="og:description" content="This work is a series of topics the author found interesting and decided to write about." />
<meta name="github-repo" content="brucebcampbell/stds" />

<meta name="author" content="Bruce Campbell" />

<meta name="date" content="2021-08-26" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="This work is a series of topics the author found interesting and decided to write about.">

<title>Chapter 20 MLOps | Selected Topics In Data Science</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#preface"><span class="toc-section-number">1</span> Preface</a></li>
<li><a href="2-intro.html#intro"><span class="toc-section-number">2</span> Introduction</a></li>
<li class="has-sub"><a href="3-data-science-best-practices-and-processes.html#data-science-best-practices-and-processes"><span class="toc-section-number">3</span> Data Science Best Practices and Processes</a><ul>
<li><a href="3-1-code-of-conduct.html#code-of-conduct"><span class="toc-section-number">3.1</span> Code of Conduct</a></li>
<li><a href="3-2-ethics.html#ethics"><span class="toc-section-number">3.2</span> Ethics</a></li>
</ul></li>
<li><a href="4-project-philosophy.html#project-philosophy"><span class="toc-section-number">4</span> Project Philosophy</a></li>
<li><a href="5-project-planning-and-accounting.html#project-planning-and-accounting"><span class="toc-section-number">5</span> Project Planning and Accounting</a></li>
<li class="has-sub"><a href="6-agile.html#agile"><span class="toc-section-number">6</span> Agile</a><ul>
<li><a href="6-agile.html#the-agile-manifesto"><span class="toc-section-number">6.0.1</span> The Agile Manifesto</a></li>
<li><a href="6-agile.html#agile-data-science-manifesto"><span class="toc-section-number">6.0.2</span> Agile Data Science Manifesto</a></li>
<li><a href="6-1-sprints.html#sprints"><span class="toc-section-number">6.1</span> Sprints</a></li>
<li><a href="6-2-planning-estimation.html#planning-estimation"><span class="toc-section-number">6.2</span> Planning &amp; Estimation</a></li>
<li><a href="6-3-execution.html#execution"><span class="toc-section-number">6.3</span> Execution</a></li>
<li><a href="6-4-demo.html#demo"><span class="toc-section-number">6.4</span> Demo</a></li>
<li><a href="6-5-retrospectives.html#retrospectives"><span class="toc-section-number">6.5</span> Retrospectives</a></li>
<li><a href="6-6-open-time.html#open-time"><span class="toc-section-number">6.6</span> Open Time</a></li>
<li><a href="6-7-the-master-backlog-and-the-open-business-questions-list.html#the-master-backlog-and-the-open-business-questions-list"><span class="toc-section-number">6.7</span> The Master Backlog and the Open Business Questions List</a></li>
<li><a href="6-8-statistical-analysis-vs-machine-learning-and-r-vs-python.html#statistical-analysis-vs.-machine-learning-and-r-vs.-python"><span class="toc-section-number">6.8</span> Statistical Analysis vs. Machine Learning and R vs. Python</a></li>
</ul></li>
<li class="has-sub"><a href="7-version-control.html#version-control"><span class="toc-section-number">7</span> Version Control</a><ul>
<li><a href="7-1-git-fundamental-ideas.html#git-fundamental-ideas"><span class="toc-section-number">7.1</span> Git Fundamental Ideas</a></li>
</ul></li>
<li class="has-sub"><a href="8-definition-of-done-for-data-science.html#definition-of-done-for-data-science"><span class="toc-section-number">8</span> Definition of Done for Data Science</a><ul>
<li><a href="8-definition-of-done-for-data-science.html#workflow"><span class="toc-section-number">8.0.1</span> Workflow</a></li>
<li><a href="8-definition-of-done-for-data-science.html#testing"><span class="toc-section-number">8.0.2</span> Testing</a></li>
<li><a href="8-definition-of-done-for-data-science.html#data-validation"><span class="toc-section-number">8.0.3</span> Data Validation</a></li>
<li><a href="8-definition-of-done-for-data-science.html#hardware"><span class="toc-section-number">8.0.4</span> Hardware</a></li>
<li><a href="8-definition-of-done-for-data-science.html#languages"><span class="toc-section-number">8.0.5</span> Languages</a></li>
<li><a href="8-definition-of-done-for-data-science.html#ides-vs-notebooks"><span class="toc-section-number">8.0.6</span> IDE’s vs Notebooks</a></li>
<li><a href="8-definition-of-done-for-data-science.html#modern-devops"><span class="toc-section-number">8.0.7</span> Modern devops</a></li>
</ul></li>
<li class="has-sub"><a href="9-data-science-reading-list.html#data-science-reading-list"><span class="toc-section-number">9</span> Data Science Reading List</a><ul>
<li><a href="9-data-science-reading-list.html#big-data"><span class="toc-section-number">9.0.1</span> Big Data</a></li>
<li class="has-sub"><a href="9-1-statistics.html#statistics"><span class="toc-section-number">9.1</span> Statistics</a><ul>
<li><a href="9-1-statistics.html#theory"><span class="toc-section-number">9.1.1</span> Theory</a></li>
<li><a href="9-1-statistics.html#applied"><span class="toc-section-number">9.1.2</span> Applied</a></li>
</ul></li>
<li><a href="9-2-machine-learning.html#machine-learning"><span class="toc-section-number">9.2</span> Machine Learning</a></li>
<li><a href="9-3-core-competencies.html#core-competencies"><span class="toc-section-number">9.3</span> Core Competencies</a></li>
</ul></li>
<li class="has-sub"><a href="10-general-advice-thoughts-on-data-science.html#general-advice-thoughts-on-data-science"><span class="toc-section-number">10</span> General Advice &amp; Thoughts on data science</a><ul>
<li><a href="10-general-advice-thoughts-on-data-science.html#to-the-managers-of-data-scientists"><span class="toc-section-number">10.0.1</span> To the managers of data scientists</a></li>
<li><a href="10-general-advice-thoughts-on-data-science.html#when-is-your-data-big"><span class="toc-section-number">10.0.2</span> When is your data big?</a></li>
<li><a href="10-general-advice-thoughts-on-data-science.html#c"><span class="toc-section-number">10.0.3</span> C++?</a></li>
<li><a href="10-general-advice-thoughts-on-data-science.html#on-metrics-and-being-data-driven"><span class="toc-section-number">10.0.4</span> On Metrics and Being Data-Driven</a></li>
<li><a href="10-general-advice-thoughts-on-data-science.html#fallacies-and-failures-in-judgment"><span class="toc-section-number">10.0.5</span> Fallacies and Failures in Judgment</a></li>
<li><a href="10-general-advice-thoughts-on-data-science.html#on-relevance"><span class="toc-section-number">10.0.6</span> On relevance</a></li>
<li><a href="10-general-advice-thoughts-on-data-science.html#on-model-complexity"><span class="toc-section-number">10.0.7</span> On model complexity</a></li>
<li><a href="10-general-advice-thoughts-on-data-science.html#on-credit-and-accountability"><span class="toc-section-number">10.0.8</span> On credit and accountability</a></li>
<li><a href="10-1-causal-inference.html#causal-inference"><span class="toc-section-number">10.1</span> Causal Inference</a></li>
<li><a href="10-2-spike-and-slab-regression.html#spike-and-slab-regression"><span class="toc-section-number">10.2</span> spike-and-slab regression</a></li>
<li><a href="10-3-nowcasting.html#nowcasting"><span class="toc-section-number">10.3</span> Nowcasting</a></li>
<li><a href="10-4-higher-criticism.html#higher-criticism"><span class="toc-section-number">10.4</span> Higher Criticism</a></li>
</ul></li>
<li><a href="11-cognitive-biases.html#cognitive-biases"><span class="toc-section-number">11</span> Cognitive Biases</a></li>
<li class="has-sub"><a href="12-hierarchical-and-grouped-time-series.html#hierarchical-and-grouped-time-series"><span class="toc-section-number">12</span> Hierarchical and grouped time series</a><ul>
<li><a href="12-1-reconciled-distributional-forecasts.html#reconciled-distributional-forecasts"><span class="toc-section-number">12.1</span> Reconciled Distributional Forecasts</a></li>
</ul></li>
<li><a href="13-propensity-score-matching-caliper.html#propensity-score-matching-caliper"><span class="toc-section-number">13</span> Propensity Score Matching : Caliper</a></li>
<li class="has-sub"><a href="14-random-effects-and-mixed-models.html#random-effects-and-mixed-models"><span class="toc-section-number">14</span> Random Effects and Mixed Models</a><ul>
<li><a href="14-1-crossed-versus-nested-random-effects-.html#crossed-versus-nested-random-effects."><span class="toc-section-number">14.1</span> Crossed versus nested random effects.</a></li>
<li><a href="14-2-very-large-number-of-res.html#very-large-number-of-res"><span class="toc-section-number">14.2</span> Very Large Number of RE’s</a></li>
</ul></li>
<li><a href="15-propensity-score-matching-caliper-1.html#propensity-score-matching-caliper-1"><span class="toc-section-number">15</span> Propensity Score Matching : Caliper</a></li>
<li class="has-sub"><a href="16-sensitivity-analysis-and-shapley-values.html#sensitivity-analysis-and-shapley-values"><span class="toc-section-number">16</span> Sensitivity Analysis and Shapley Values</a><ul>
<li><a href="16-1-relationship-between-sobol-indices-and-shapley-values.html#relationship-between-sobol-indices-and-shapley-values"><span class="toc-section-number">16.1</span> Relationship between Sobol indices and Shapley values</a></li>
<li><a href="16-2-cran-sensitivity-package.html#cran-sensitivity-package"><span class="toc-section-number">16.2</span> CRAN sensitivity package</a></li>
<li><a href="16-3-partial-correlation-coefficients.html#partial-correlation-coefficients"><span class="toc-section-number">16.3</span> Partial Correlation Coefficients</a></li>
<li><a href="16-4-sobol-indices-for-deterministic-function-and-for-model.html#sobol-indices-for-deterministic-function-and-for-model"><span class="toc-section-number">16.4</span> Sobol indices for deterministic function and for model</a></li>
</ul></li>
<li><a href="17-on-model-averaging.html#on-model-averaging"><span class="toc-section-number">17</span> On Model Averaging</a></li>
<li class="has-sub"><a href="18-poincare-embedding.html#poincare-embedding"><span class="toc-section-number">18</span> Poincare Embedding</a><ul>
<li><a href="18-1-embeddings.html#embeddings"><span class="toc-section-number">18.1</span> Embeddings</a></li>
</ul></li>
<li><a href="19-multirelational.html#multirelational"><span class="toc-section-number">19</span> Multirelational</a></li>
<li><a href="20-mlops.html#mlops"><span class="toc-section-number">20</span> MLOps</a></li>
<li class="has-sub"><a href="21-introduction-to-normalizing-flows.html#introduction-to-normalizing-flows"><span class="toc-section-number">21</span> Introduction to Normalizing Flows</a><ul>
<li><a href="21-1-variational-inference-with-nf.html#variational-inference-with-nf"><span class="toc-section-number">21.1</span> Variational Inference With NF</a></li>
</ul></li>
<li><a href="22-sa-and-m-estimators.html#sa-and-m-estimators"><span class="toc-section-number">22</span> SA and M-estimators</a></li>
<li><a href="23-random-matrix-theory-and-machine-learning.html#random-matrix-theory-and-machine-learning"><span class="toc-section-number">23</span> Random Matrix Theory and Machine Learning</a></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="mlops" class="section level1">
<h1><span class="header-section-number">Chapter 20</span> MLOps</h1>
<p><em>Development platform: a collaborative platform for performing ML experiments and empowering the creation of ML models by data scientists should be considered part of the MLOps framework. This platform should enable secure access to data sources (e.g. from data engineering workflows). We want the handover from ML training to deployment to be as smooth as possible, which is more likely the case for such a platform as compared to ML models developed in different local environment.
Model unit testing: every time we create, change, or retrain a model, we should automatically validate the integrity of the model, e.g.
- should meet minimum performance on test set
- should perform well on synthetic use case-specific datasets
Versioning: it should be possible to go back in time to inspect everything relating to a given model; e.g. what data &amp; code was used. Why? because it something breaks, we need to be able to go back in time and see why.
Model registry: there should be an overview of deployed &amp; decommissioned ML models, their version history, and deployment stage of each version. Why? if something breaks, we can rollback a previous archived version back into production.
Model Governance: only certain people should have access to see training related to any given model, and there should be access control for who can request/reject/approve transitions between deployment stages (e.g. dev to test to prod) in the model registry.
Deployments: deployment can be many things, but in this post I consider the case where we want to deploy a model to cloud infrastructure and expose an API, which enables other people to consume and use the model, i.e. I’m not considering cases where we want to deploy ML models into embedded systems. Efficient model deployments on appropriate infrastructure should:
- support multiple ML frameworks + custom models
- have well defined API spec (e.g. Swagger/OpenAPI)
- support containerized model servers
Monitoring: tracking performance metrics (throughput, uptime, etc.). Why? If all of the sudden a model starts returning errors, or being unexpectedly slow, we need to know before the end-user complains, so that we can fix it.
Feedback: we need to feedback information to the model on how well it is performing. Why? typically we run predictions on new samples where we do not yet know the ground truth. As we learn the truth, however, we need to inform the model, so that it can report on how well it is actually doing.
A/B testing: no matter how solid cross-validation we think we’re doing, we never know how the model will perform until it actually gets deployed. It should be easy to perform A/B experiments with live models within the MLOps framework.
Drift detection: typically the longer time a given model is deployed the worse it becomes as circumstances change compared to the time of training the model. We can try to monitor and alert on these different circumstances, or “drifts”, before they get too severe:
- Concept drift: when the relation between input and output has changed
- Prediction drift: changes in incoming predictions, but model still holds
- Label drift: change in the model’s outcomes compared to training data
- Feature drift: change in the distribution of model input data
Outlier detection: if a deployed model receives an input sample which is significantly different from anything observed during training, we can try to identify this sample as a potential outlier, and the returned prediction should be marked as such, indicating that the end-user should be careful in trusting the prediction.
Adversarial Attack Detection: we should be warned when our models are attacked by adversarial samples (e.g. someone trying to abuse / manipulate the outcome of our algorithms).
Interpretability: the ML deployments should support endpoints returning the explanation of our prediction, e.g. through SHAP values. Why? for a lot of use cases a prediction is not enough and the end-user needs to know why a given prediction was made.
Governance of deployments: we not only need access restrictions on who can see the data, trained models, etc, but also for who can eventually use the deployed models. These deployed models can often be just as confidential as the data they were trained on.
Data-centricity: rather than focus on model performance &amp; improvements, it makes sense that a MLOps framework also enables an increased focus on how data quality and breadth can be improved.</em></p>

</div>
<p style="text-align: center;">
<a href="19-multirelational.html"><button class="btn btn-default">Previous</button></a>
<a href="21-introduction-to-normalizing-flows.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
